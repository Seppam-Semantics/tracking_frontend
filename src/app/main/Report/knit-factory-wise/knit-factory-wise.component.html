<mat-toolbar style="display: flex; justify-content: center; height: auto;">
    <button mat-button (click)="back()" color="primary">Back</button>
    <div style="display: flex; justify-content: center; width: 100%;">
        <span>Knit Factory wise List</span>
    </div>
    <div style="flex: 1 1 auto;"></div>

    <p-dropdown [options]="fty_name" placeholder="KnitFty" [editable]="true" optionValue="knitfty"
     optionLabel="knitfty" [(ngModel)]="knitfty"></p-dropdown>

    <p-dropdown [options]="machineDiadrop" placeholder="Machine Dia" [editable]="true" optionValue="machineDia" optionLabel="machineDia"
    [(ngModel)]="machineDia" (onChange)="machineDiaValue()"></p-dropdown>

</mat-toolbar>
<div class="tablecss" [formGroup]="knitFtyMachineForm">
    <table class="table table-hover fl-table" id="table-data" cdkDropList (cdkDropListDropped)="drop($event)">
        <thead class="thead-dark">
            <tr>
                <!-- <th><button class="btn btn-danger" (click)="knitFtyMachineAddButton()">+</button></th> -->
                <th>S.No</th>
                <th>Buyer</th>
                <th>OrderNo</th>

                <th>Style</th>
                <th>Color</th>
                <th>F.Size</th>

                <th>Greige-Kgs</th>
                <th>Mechine Dia </th>
                <th>Knit Fty</th>

                <th>AllocMCNos</th>
                <th>StartDate</th>
                <th>DaysReqd</th>

                <th>EndDate</th>
                <th>Old Id</th>
            </tr>
        </thead>
        <tbody formArrayName="data" >
            <tr *ngFor="let list of items.controls; let i=index" [formGroupName]="i" cdkDrag (mouseenter)="calculateEndDate(i)">
                
                <td cdkDragHandle>{{i+1}}</td>

                <td cdkDragHandle>
                    <input type="text" class="form-control" formControlName="buyer" 
                    (mouseenter)="check(i)" (mouseenter)="calculateEndDate(i)" readonly>
                </td>
                <td cdkDragHandle>
                    <input type="text" class="form-control" formControlName="orderNo" 
                    (mouseenter)="check(i)" (mouseenter)="calculateEndDate(i)" readonly>
                </td>
                <td cdkDragHandle>
                        <input type="text" class="form-control" formControlName="style" (onChange)="stylevalue(i)"
                        (mouseenter)="ordervalue(i)" (onChange)="styledata()" (onChange)="check(i)"
                        (mouseenter)="check(i)" (mouseenter)="calculateEndDate(i)" readonly>
                </td>

                <td cdkDragHandle>
                        <input type="text" class="form-control" formControlName="color" 
                        (onChange)="colorvalue(i)" (onChange)="colordata()"
                        (mouseenter)="stylevalue(i)" (onChange)="check(i)" (click)="check(i)" (mouseenter)="check(i)"
                        (mouseenter)="calculateEndDate(i)" readonly>
                </td>

                <td cdkDragHandle>
                      <input type="text" class="form-control" formControlName="size" (mouseenter)="colorvalue(i)" (onChange)="getwoId(i)"
                      (onChange)="check(i)" (mouseenter)="check(i)" (mouseenter)="calculateEndDate(i)"
                      (mouseenter)="greigevalidation(i)" readonly>
                    </td>

                <td cdkDragHandle>
                    <input type="text" class="form-control" formControlName="greigeKg" (input)="Addcheck(i)"
                        (input)="valid($event.target.value,i)" (mouseenter)="check(i)"
                        (mouseenter)="calculateEndDate(i)" (mouseenter)="greigevalidation(i)"
                        [ngClass]="{'is-invalid':this.toleranceValid[i]}" readonly>
                </td>

                <td cdkDragHandle>
                    <input type="text" class="form-control" formControlName="machineDia" (click)="check(i)"
                        (mouseenter)="check(i)" readonly>
                </td>


                <td cdkDragHandle>
                    <input class="form-control" type="text" formControlName="knitFty" list="fty"
                        (input)="production_days($event.target.value, i)" readonly (click)="check(i)" (mouseenter)="check(i)">
                    <datalist id="fty">
                        <option *ngFor="let ftyName of this.ftyName" value="{{ftyName.knitFty}}">{{ftyName.knitFty}}
                        </option>
                    </datalist>
                </td>

                <td cdkDragHandle> 
                    <input class="form-control" type="text" readonly formControlName="allocated" (mouseenter)="check(i)"></td>
                <td cdkDragHandle> 
                    <input class="form-control" type="date" formControlName="startDate" readonly (change)="calculateEndDate(i)"
                        (click)="check(i)" (mouseenter)="check(i)"></td>
                <td cdkDragHandle><input class="form-control" type="number" formControlName="daysrequired" readonly
                        (click)="calculateEndDate(i)" (click)="check(i)" (mouseenter)="check(i)"></td>
                <td cdkDragHandle><input class="form-control" type="date" formControlName="endDate" readonly></td>
                <td cdkDragHandle><input formControlName="id" class="form-control" readonly/></td>

                <div *cdkDragPreview matchSize="true" class="container dragdrop-placeholder">
                    <span>Moving</span>
                </div>
            </tr>
        </tbody>
    </table>
<div style="display: flex; width: 100%; justify-content: center;">
    <div>
        <button class="btn btn-success">Save</button>
    </div>
</div>
</div>
