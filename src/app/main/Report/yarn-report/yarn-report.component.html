<div>
    <div>
        <mat-toolbar style="display: flex; justify-content: center; height: auto;">
            <span>Yarn Report</span>
        </mat-toolbar>
    </div>
    <div>
        <table class="table">
            <thead class="thead-dark">
                <tr>
                    <th>Sl.No</th>
                    <th>Spin Fty</th>
                    <th>LC Date</th>
                    <th>LC no</th>

                    <th>PI</th>
                    <th>PI Date</th>
                    <th>LC Yarn Kgs</th>

                    <th>LC Value</th>
                    <th>Status</th>
                    <th>Edit</th>

                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of this.AllData;let i = index">
                <td>{{i+1}}</td>
                <td>{{data.spinner}}</td>
                <td>{{data.lcDate}}</td>
                <td>{{data.lcNo}}</td>

                <td>{{data.pi}}</td>
                <td>{{data.piDate}}</td>
                <td>{{data.lcYarnKgs}}</td>

                <td>{{data.lcValue}}</td>
                <td>{{data.yarnStatus}}</td>
                <td><button class="btn btn-primary" data-toggle="modal" data-target="#edit" (click)="EditAllData(data.id)"><mat-icon>edit</mat-icon></button></td>

                <td><button class="btn btn-primary"><mat-icon>delete</mat-icon></button></td>
            </tr>

            </tbody>
        </table>
    </div>
</div>

<!--------------------------------------------------------------------------------------------------->

<div class="modal fade" id="edit" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen" role="document">
        <div class="modal-content">
            <div class="modal-body">
<!--------------------------------------------------------------------------------------------------->

<mat-tab-group>
    <!-------------------------------Header[Start]----------------------------------->
    <mat-tab label="Header" [formGroup]="Yarn_Entry_1">
        <div style="display: flex; justify-content: center; align-items: center; margin-top: 2%;">
            <button class="btn btn-primary" (click)="Yarn_Entry_save()">Update</button>
        </div>
        <!-------------------------------->
        <div style="overflow: scroll; height: 65vh; margin-top: 1%;">
            <!-------------------------------->
            <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th>Spin Fty</th>
                            <th>LC Date</th>
                            <th>LC no</th>
                            <th>PI</th>
                            <th>PI Date</th>
                            <th>LC Yarn Kgs</th>
                            <th>LC Value</th>
                            <th>Status</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>
                                <input type="text" class="form-control" formControlName="spinner" list="spin">
                                <datalist id="spin">
                                    <option *ngFor="let spin of this.spinfty" value="{{spin.spinfty}}"></option>
                                </datalist>
                            </td>
                            <td><input type="date" class="form-control" formControlName="lcDate"></td>
                            <td><input type="text" class="form-control" formControlName="lcNo"></td>
                            <td><input type="text" class="form-control" formControlName="pi"></td>
                            <td><input type="date" class="form-control" formControlName="piDate"></td>
                            <td><input type="text" class="form-control" readonly formControlName="lcYarnKgs"></td>
                            <td><input type="text" class="form-control" readonly formControlName="lcValue"></td>
                            <td><select class="form-control" formControlName="yarnStatus">
                                    <option value="Status"></option>
                                    <option value="open">open</option>
                                    <option value="close">close</option>
                                </select></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-------------------------------->
            <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th><button class="btn btn-danger" (click)="add1button()" style="font-size:inherit">Add
                                    lines</button></th>
                            <th>Yarn Type</th>
                            <th>LC Yarn Kgs</th>
                            <th>Yarn Rate</th>
                            <th>LC Value</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody formArrayName="data">

                        <tr *ngFor="let process of items.controls; let i=index" [formGroupName]="i">
                            <td></td>
                            <td><input type="text" class="form-control" formControlName="yarnType" type="text"></td>
                            <td><input type="text" class="form-control" formControlName="lcYarnKgs" type="number"></td>
                            <td><input type="text" class="form-control" formControlName="yarnRate" type="number"></td>
                            <td><input type="number" class="form-control" formControlName="yarnValue"></td>
                            <td><button class="btn-danger" (click)="Yarn_Entry_Delete(i)">x</button></td>
                        </tr>
                    </tbody>
                    <tr>
                        <td><b>Total</b></td>
                        <td></td>
                        <td><input type="number" class="form-control" readonly
                                [value]="Yarn_Entry_1.get('Total10')?.value"></td>
                        <td></td>
                        <td><input type="number" class="form-control" readonly
                                [value]="Yarn_Entry_1.get('Total12')?.value"></td>
                        <td></td>
                    </tr>

                </table>

            </div>
            <!-------------------------------->

            <!-------------------------------->
        </div>
    </mat-tab>
    <!-------------------------------Header[Ends]----------------------------------->
<!-- ============================================================================================================================================================================ -->
    <!-------------------------------Lot Check[Start]----------------------------------->
    <mat-tab label="Lot Check" >
        <div style="overflow: scroll; height: 75vh;">
            <div style="display: flex; justify-content: center; align-items: center; margin-top: 2%;">
            <mat-form-field appearance="outline">
                <mat-label>Spin Fty</mat-label>
                <mat-select [(ngModel)]="spinftyYarnType" (selectionChange)="getYarnLcNo()">
                  <mat-option></mat-option>
                  <mat-option *ngFor="let spin of yarnSpinnerDropdown" value="{{spin.spinner}}">{{spin.spinner}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Lc No</mat-label>
                <mat-select [(ngModel)]="spinLotliNo" (selectionChange)="getYarnTypeData()">
                  <mat-option></mat-option>
                  <mat-option *ngFor="let lc of this.spinnerLotlcNo" value="{{lc.lcNo}}">{{lc.lcNo}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>      
            <!------------------------------------>
            <div [formGroup]="LotCheck">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th><button class="btn btn-danger" style="font-size: inherit;" (click)="LotCheckAddButton()">Add Lines</button></th>
                            <th>Yarn Type</th>
                            <th>Lot no</th>
                            <th>Sample Dt</th>
                            <th>Result Dt</th>
                            <th>Results</th>
                            <th>Accept / Reject</th>
                        </tr>
                    </thead>

                    <tbody formArrayName="data">
                        <tr *ngFor="let process of LotCheckItems.controls; let i = index;" [formGroupName]="i">
                            <td></td>
                            <td>
                                <select formControlName="yarnType" style="width: -webkit-fill-available;" class="form-control">
                                    <option value=""></option>
                                    <option value=""
                                    *ngFor="let type of this.yarnType" value="{{type.yarnType}}">{{type.yarnType}}</option>
                                </select>
                            </td>
                            <td><input formControlName="lotNo" class="form-control"></td>

                            <td>
                                <input type="date" class="form-control" formControlName="sampleDate">
                            </td>
                            <td>
                                <input type="date" class="form-control" formControlName="resultDate">
                            </td>
                            <td>
                                <input type="text" class="form-control" formControlName="checkResults">
                            </td>

                            <td>
                                <mat-checkbox formControlName="acceptRejectStatus"></mat-checkbox>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!------------------------------------>
            <div style="display: flex; justify-content: center;"> <button class="btn btn-primary"
                    (click)="LotCheck_Button()">Update</button></div>
            <!------------------------------------>
  
            <!------------------------------------>
        </div>
    </mat-tab>
    <!-------------------------------Lot Check[Ends]----------------------------------->

    <!-------------------------------Order Allocation[Start]----------------------------------->
    <mat-tab label="Order Allocation">
        <div style="overflow: scroll; height: 75vh;">
            <!--------------------------------------------------------------------------->
            <div style="display: flex; justify-content: center; align-items: center; margin-top: 2%;">
                <mat-form-field appearance="outline">
                    <mat-label>Spin Fty</mat-label>
                    <mat-select [(ngModel)]="spinftyOrder" (selectionChange)="getYarnorderLcNo()">
                      <mat-option></mat-option>
                      <mat-option *ngFor="let spin of yarnSpinnerDropdown" [value]="spin.spinner">{{spin.spinner}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Lc No</mat-label>
                    <mat-select [(ngModel)]="spinorderliNo" (selectionChange)="getOrderAllocationData()">
                      <mat-option></mat-option>
                      <mat-option *ngFor="let lc of this.spinnerorderlcNo" value="{{lc.lcNo}}">{{lc.lcNo}}</mat-option>
                    </mat-select>
                  </mat-form-field>
            </div> 
            <div style="display: flex; justify-content: center; align-items: center;">
                <mat-form-field appearance="outline">
                    <mat-label>Buyer</mat-label>
                    <mat-select [(ngModel)]="buyerName" (selectionChange)="getorders()">
                      <mat-option value=""> </mat-option>
                      <mat-option *ngFor="let buyer of this.buyers" value="{{buyer.buyer}}">{{buyer.buyer}}</mat-option>
                    </mat-select>
                  </mat-form-field>
            </div>
            <!--------------------------------------------------------------------------->
            <div [formGroup]="OrderAllocation">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th><button class="btn btn-danger" (click)="OrderAllocationAddButton()"
                                    style="font-size: inherit;">+</button></th>
                            <th>Yarn Type</th>

                            <th>Order No</th>
                            <th>Colour</th>
                            <th>Lot No</th>

                            <th>Allocated Yarn Kgs</th>
                            <th>Unallocated Yarn Kgs</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody formArrayName="data">
                        <tr *ngFor="let process of items2.controls; let i=index" [formGroupName]="i">
                            <td></td>
                            <td>
                                <input type="text" class="form-control" formControlName="yarnType" list="yarnType">
                                <datalist id="yarnType">
                                    <option *ngFor="let order of this.yarnTypeOrder" value="{{order.yarnType}}"></option>
                                </datalist>
                            </td>

                            <td>
                                <input type="text" class="form-control" formControlName="utilisationOrderNo" list="order">
                                <datalist id="order">
                                    <option *ngFor="let order of this.orderNo" value="{{order.orderNO}}"></option>
                                </datalist>
                            </td>
                            <td><input type="text" class="form-control" formControlName="colour"></td>
                            <td>
                                <input type="text" class="form-control" formControlName="lotNo" list="spinLot">
                                <datalist id="spinLot">
                                    <option *ngFor="let lot of yarnTypeOrder" value="{{lot.lotNo}}"></option>
                                </datalist>
                            </td>

                            <td><input type="number" class="form-control" formControlName="allocatedYarnKgs"></td>
                            <td><input type="text" class="form-control" formControlName="unallocatedYarnKgs" readonly></td>
                            <td><button class="btn-danger" (click)="OrderAllocationDelete(i)">x</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="display: flex; justify-content: center;">
                <button class="btn btn-primary" (click)="OrderAllocationSave()">Update</button>
            </div>
            <!--------------------------------------------->



        </div>
    </mat-tab>
    <!-------------------------------Order Allocationc[Ends]----------------------------------->


    <!-------------------------------Receipt[Start]------------------------------------------------------------------------------------------------------------------>
    <mat-tab label="Receipt">
        <div style="overflow: scroll; height: 75vh;">
            <!--------------------------------------------->

            <!------------------------------>
            <div [formGroup]="Receipt">
                <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th>Spin Fty</th>
                            <th>LC No</th>
                            <th>Yarn Type</th>

                            <th>Order No</th>
                            <th>Colour</th>
                            <th>Lot No</th>

                            <th>Allocated Yarn Kgs</th>
                            <th>Unallocated Yarn Kgs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Spin Fty</mat-label>
                                    <mat-select formControlName="spinftyreceipt" (selectionChange)="getYarnReceiptLcNo()">
                                      <mat-option></mat-option>
                                      <mat-option *ngFor="let spin of yarnSpinnerDropdown" [value]="spin.spinner">{{spin.spinner}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>LC No</mat-label>
                                    <mat-select formControlName="receiptLc" (selectionChange)="getreceiptData()">
                                        <mat-option *ngFor="let lc of this.spinnerreceiptlcNo" value="{{lc.lcNo}}">{{lc.lcNo}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Yarn Type</mat-label>
                                    <mat-select formControlName="receiptYarnType">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let type of this.yarnTypereceipt" value="{{type.yarnType}}">{{type.yarnType}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Order No</mat-label>
                                    <mat-select formControlName="yarnOrderId">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let order of this.yarnTypereceipt" value="{{order.utilisationOrderNo}}">{{order.utilisationOrderNo}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Colour</mat-label>
                                    <mat-select formControlName="receiptOrderColor">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let color of this.yarnTypereceipt" value="{{color.colour}}">{{color.colour}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Lot No</mat-label>
                                    <mat-select formControlName="receiptLotNo">
                                        <mat-option></mat-option>
                                        <mat-option *ngFor="let lot of this.yarnTypereceipt" value="{{lot.lotNo}}">{{lot.lotNo}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>

                            <td><input type="text" class="form-control" readonly formControlName="AllocatedYarnTotal"></td>
                            <td><input type="text" class="form-control" readonly formControlName="unallocatedYarnTotal"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="display: flex; justify-content: center;">
                <button class="btn btn-primary" (click)="receiptSave()">Update</button>
            </div>
            <!--------------------------------------------->

            <div [formGroup]="receiptForm">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th><button class="btn btn-danger" (click)="ReceiptAddButton()"
                                    style="font-size: inherit;">AddLines</button></th>
                            <th>Spin Challan</th>
                            <th>SBDL Challan</th>
                            <th>Receipt Dt</th>

                            <th>Knit Factory</th>
                            <th>Bags/Ctn - nos</th>
                            <th>Receipt Yarn Kgs</th>

                            <th>Pending Receipts - Kgs</th>
                            <th></th>

                        </tr>
                    </thead>
                    <tbody formArrayName="data">
                        <tr *ngFor="let process of items3.controls; let i=index" [formGroupName]="i">
                            <td></td>
                            <td>
                                <input type="text" class="form-control" formControlName="spinningChallan">
                            </td>
                            <td>
                                <input type="text" class="form-control" formControlName="scandexChallan">
                            </td>
                            <td>
                                <input type="date" class="form-control" formControlName="receiptDt">
                            </td>
                            <td>
                                <input type="text" class="form-control" formControlName="knitFactory">
                            </td>
                            <td>
                                <input type="number" class="form-control" formControlName="BagsCtnNos">
                            </td>
                            <td>
                                <input type="number" class="form-control" formControlName="receiptYarnKgs">
                            </td>
                            <td>
                                <input type="text" class="form-control" formControlName="pendingReceiptKgs">
                            </td>
                            <td>
                                <button class="btn-danger" (click)="ReceiptDelete(i)">x</button>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
            </div>
            <!--------------------------------------------->

        </div>
    </mat-tab>
    <!-------------------------------Receipt[Ends]----------------------------------->


    <!-------------------------------Yarn QC[Start]----------------------------------->
    <mat-tab label="Yarn QC" [formGroup]="Yarn_QC">
        <div style="overflow: scroll; height: 75vh;">
            <!--------------------------------------------->
            <div style="display: flex; justify-content: center;"><button class="btn btn-primary">Update</button></div>
            <!--------------------------------------------->
            <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th>Spin Fty</th>
                            <th>LC No</th>
                            <th>Yarn Type</th>

                            <th>Order No</th>
                            <th>Colour</th>
                            <th>Lot No</th>

                            <th>Allocated Yarn Kgs</th>
                            <th>Unallocated Yarn Kgs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>

                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Spin Fty</mat-label>
                                    <mat-select formControlName="111">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>LC No</mat-label>
                                    <mat-select formControlName="222">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Yarn Type</mat-label>
                                    <mat-select formControlName="333">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>


                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Order No</mat-label>
                                    <mat-select formControlName="444">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Colour</mat-label>
                                    <mat-select formControlName="555">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field appearance="outline" style="width: 20vh;">
                                    <mat-label>Lot No</mat-label>
                                    <mat-select formControlName="666">
                                        <mat-option></mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>

                            <td><input type="text" class="form-control" readonly formControlName="777"></td>
                            <td><input type="text" class="form-control" readonly formControlName="888"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--------------------------------------------->
            <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th></th>
                            <th>Spin Challan</th>
                            <th>SBDL Challan</th>
                            <th>Receipt Dt</th>

                            <th>Knit Factory</th>
                            <th>Bags/Ctn - nos</th>
                            <th>Receipt Yarn Kgs</th>

                            <th>Pending Receipts - Kgs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td><input type="text" class="form-control" readonly></td>
                            <td><input type="text" class="form-control" readonly></td>
                            <td><input type="text" class="form-control" readonly></td>

                            <td><input type="text" class="form-control" readonly></td>
                            <td><input type="text" class="form-control" readonly></td>
                            <td><input type="text" class="form-control" readonly></td>

                            <td><input type="text" class="form-control" readonly></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--------------------------------------------->
            <div>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th><button class="btn btn-danger" (click)="YarnQCAddButton()"
                                    style="font-size: inherit;">AddLines</button></th>
                            <th>Check Dt</th>
                            <th>Results</th>
                            <th>Accept / Reject</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody formArrayName="data4">
                        <tr *ngFor="let process of items4.controls; let i=index" [formGroupName]="i">
                            <td></td>
                            <td>
                                <input type="date" class="form-control" formControlName="1">
                            </td>
                            <td>
                                <input type="text" class="form-control" formControlName="2">
                            </td>
                            <td>
                                <mat-checkbox formControlName="3"></mat-checkbox>
                            </td>
                            <td>
                                <button class="btn-danger" (click)="YarnQCDelete(i)">x</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--------------------------------------------->

            <!--------------------------------------------->

        </div>

    </mat-tab>
    <!-------------------------------Yarn QC[Ends]----------------------------------->
</mat-tab-group>




<!--------------------------------------------------------------------------------------------------->
            </div>

            <div class="modal-footer">
<!--------------------------------------------------------------------------------------------------->

                <div style="display: flex; justify-content: center;">
                    <button class="btn btn-danger" data-dismiss="modal" >Close</button>
                </div>


<!--------------------------------------------------------------------------------------------------->
            </div>

        </div>
    </div>
</div>